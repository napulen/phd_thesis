% Copyright 2022 Néstor Nápoles López

% In previous methods, such as \textcite{chen2018functional,
% chen2019harmony, micchi2020not, micchi2021deep,
% mcleod2021modular} there is generally only one task
% related to the ``key'' to solve by the machine learning
% model. Applied chords and other fluctuations of key are
% handled either by a ``secondary degree'' task
% \parencite{chen2021attend, micchi2021deep} or not modeled
% explicitly \parencite{mcleod2021modular}.

The \gls{tonicization38} is a classification task that
predicts the $\elden$ component of a \gls{rna} annotation.
In other approaches
\parencite{chen2021attend,micchi2021deep}, this is addressed
as a ``secondary degree'' task. Nonetheless, here the
tonicization is modeled as a key, instead of a relative
scale degree. Using the notation of the
\refappendix{amethodforsystematicromannumeralanalysis}, what
the \gls{tonicization38} task predicts is the key implied by
the tonicization, $\elden_{\elkey}$. The motivation for this
departure is the high class imbalance that exists in
predicting secondary degrees. Tonicizations are scarce,
thus, most of the times there will be no tonicization in a
given timestep, which tends to be detrimental for the
performance of the model, because the model may learn to
predict that tonicizations never happen. By predicting
$\elden_{\elkey}$ instead, the \gls{tonicization38} learns
key fluctuations that are generally shorter than the ones in
\gls{localkey38} task. When generating a \gls{rna} label
from the model $\elden_{\elkey}$ can be easily reverted to
$\elden$, by encoding the key $\elden_{\elkey}$ as a scale
degree that is relative to $\elkey$. Finally, because
\gls{tonicization38} is a classification task for keys, it
uses the $\setkey$, with 38 classes available for the
tonicized keys.

The \gls{tonicization38} task used in this \gls{mtl}
configuration is equivalent to the ``secondary degree''
tasks in other approaches
\parencite{chen2021attend,micchi2021deep}. However, instead
of encoding the tonicization as a scale degree $\elden \in
\setden$, the tonicization is encoded as a key
$\elden_\elkey \in \setkey$. 

% In the proposed tasks of this dissertation, an alternative
% approach is proposed based on two layers of key analysis.
% The \gls{localkey38} task represents the key of a region
% of music. By default, any Roman numeral label is
% interpreted in reference to the \gls{localkey38}. However,
% for cases of tonicization, a different key is encoded. The
% scope of a tonicization key is always the current
% timestep, and it is considered an instantaneous
% fluctuation of key (i.e., it does not affect future
% timesteps). This other task is referred as the
% \gls{tonicization38}. The vocabulary of keys is the same
% one used for \gls{localkey38}, $\setkey$.
