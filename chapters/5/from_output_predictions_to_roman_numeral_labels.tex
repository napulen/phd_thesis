% Copyright 2022 Néstor Nápoles López

Although the predictions provided by the multitask learning
model are important for an \gls{arna} system, there is
another important step, which consists of turning those
predictions into a Roman numeral label.

The end-to-end system proposed in this dissertation requires
three pieces of information to generate a Roman numeral
label:
\begin{enumerate}
    \item a \gls{pcset} $\rho \in \vocabpcset$
    \item a key $k \in \vocabkey$
    \item an inversion $i \in$ $\{$ $0$, $1$, $2$, $3$ $\}$
\end{enumerate}


There is not a unique way to do this, because multiple tasks
provide similar information. For example, the \gls{satb35}
tasks and the \gls{pcset121} task can both be used to
retrieve the chord. These different tasks are often
advantageous in different musical situations. They might
also require a different postprocessing.

Thanks to the approach followed to resolve \gls{rna} labels
from \gls{pcset}s and keys, these are the main two pieces of
information needed from the predictions of the neural
network to generate a final \gls{rna} string. There are,
however, a few exceptions.

The \gls{satb35}, \gls{pcset121}, and \gls{rn31} tasks can
all be used to retrieve the \gls{pcset}.


% In this section, three methods for processing the
% predictions are presented. The first method, dubbed the
% ``conventional'' method, is the one introduced by
% \textcite{chen2018functional}. The second method is a
% method dubbed the ``common Roman numerals'' method,
% introduced in \textcite{napoleslopez2021augmentednet}.
% Lastly, the third method is the proposed method in this
% \thesisdiss{}, which makes use of the nine multitask
% learning predictions presented in
% \refsubsec{proposedtasks}.

% \phdfigure[All the pitch-class sets associated with the
% key of C major]{pcset_key_to_rn} \phdfigure[All the keys
% where the pitch-class set (0, 4, 7) has a
% role]{pcset_pcset_to_rn} \phdfigure[All the keys that have
% a \gls{rna} of $\rn{I}$]{pcset_rn_to_key}

% The method by \textcite{chen2018functional} to reconstruct
% the \gls{rna} labels relied on five of the six
% conventional tasks described in
% \refsubsec{conventionaltasks}. In their paper,
% \textcite{chen2018functional} did not discuss how these
% predictions were processed to obtain Roman numeral labels
% all the way to the output, however, it is possible to use
% them in the following way.

% In \textcite{napoleslopez2021augmentednet}, the \gls{rna}
% labels were reconstructed using either the
% ``conventional'' method or a feature called the
% \emph{CommonRomanNumerals75}.

% The \emph{CommonRomanNumerals75} indicated the 75-most
% common classes of Roman numerals labels. These labels were
% stripped from the inversion information, but not of
% secondary degrees. That is, the list of 75 labels spanned
% the 75-most common Roman numeral strings collapsed to
% their root position form.

% In this case, the reconstruction of Roman numerals was
% slightly different.
