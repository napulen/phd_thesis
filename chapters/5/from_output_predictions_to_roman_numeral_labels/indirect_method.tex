% Copyright 2022 Néstor Nápoles López

In addition to the direct method that can be used with the
\gls{mtl} predictions of this model, it might be useful to
generate Roman numeral labels when only a chord label and
key are provided. Some methods, such as the one in
\textcite{mcleod2021modular}, produce chord labels and keys.
Thus, a numerator $\elnum$ and a tonicization $\elden$ need
to be estimated from the chord label and key. In that
situation, an alternative method is provided, based on the
\algorithmrn{} algorithm, described in
\refsec{thenumeratorandtonicizationestimationmethod}.
This was the method used to estimate full \gls{rna} labels
from the predictions of the model in
\textcite{mcleod2021modular, chen2021attend} during the
evaluation (which is explained in
\refsec{evaluationagainstpreviousmodels})

The method follows the same principles described in the
direct method, with the following differences: the numerator
$\elnumpred$ and tonicization $\eldenpred$ are not directly
available from the predictions of the neural network.
Instead, they are retrieved from the chord label and key
using the \algorithmrn{} algorithm, as shown in
\refeq{calling_natem}.

\begin{equation}
    \label{eq:calling_natem}
    (\elnumpred, \eldenpred) = \algorithmrn{}(\elpcset, \elkey) 
\end{equation}

In \refeq{calling_natem}, the \gls{pcset} $\elpcset \in
\setpcset$ is the representation of the chord label as a set
of pitch classes. It is easy to obtain this set by first
deriving the notes that comprise the chord label, and then
listing their pitch classes, as shown
\refeq{indirect_method_pcset}. This information is generally
available in any \gls{acr} approach, regardless of the
syntax of the chord labels.


\begin{equation}
    \label{eq:indirect_method_pcset}
    Gmin \implies \{\pitchG, \pitchBb, \pitchD\} \implies (7, 10, 2)
\end{equation} 

After the \gls{pcset} $\elpcsetpred$ is obtained from the
machine learning model, the numerator $\elnumpred$ and
tonicization $\eldenpred$ can be retrieved with the
\algorithmrn{} algorithm. Afterwards, the process to
generate the \gls{rna} label is the same as in the direct
method. In order to illustrate the indirect method, an
example will be computed from the predictions of the
\gls{pcset121} of the \gls{crnn} proposed here.

