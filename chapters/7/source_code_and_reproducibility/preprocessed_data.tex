% Copyright 2022 Néstor Nápoles López

The aggregated dataset was processed in two sequential
steps: a ``human-friendly'' \gls{tsv} file and a
``machine-friendly'' tensor of sequences. The \gls{tsv} file
was generated by processing \gls{musicxml} and
\gls{romantext} source files with the \emph{music21}
\parencite{cuthbert2010music21} and \emph{pandas}
\parencite{mckinney2011pandas} packages into a ``tabular''
representation. During this process, the common error
patterns were searched and measured in the \gls{tsv} file,
which made it easier to spot files that were misaligned or
presented bad quality annotations. The tensor of sequences,
written as a binary \emph{numpy}
\parencite{oliphant2006guide} multidimensional array was
generated by encoding each \gls{tsv} file into a numeric
representation. The encoding of these tensors were based on
the definition of the input (\gls{bass19}, \gls{chroma19},
and \gls{duration14}) and output (\gls{alto35},
\gls{bass35}, \gls{harmonicrhythm7}, \gls{localkey38},
\gls{pcset121}, \gls{rn31}, \gls{soprano35}, \gls{tenor35},
and \gls{tonicization38}) representations.

The generation of the initial \gls{tsv} file was generally
slower\footnote{Nearly 50 minutes to compute on an Intel i7
10750 processor.} and did not change often. The generation
of the tensor sequences was generally faster\footnote{Nearly
3 minutes to compute on an Intel i7 10750 processor,
considering the aggregated dataset (see
\refsec{theaggregateddataset}) without data augmentation.}
and changed frequently for experimentation. Thus, a
preprocessed collection of \gls{tsv} files was distributed
with each of the releases of the system. This can be used to
reproduce the results of the experiments presented here or
to facilitate the exploration of new tonal tasks or
input/output representations.
